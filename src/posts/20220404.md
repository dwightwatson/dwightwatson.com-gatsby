---
title: Pre-defined ActiveStorage variants in Rails 7
path: /posts/pre-defined-activestorage-variants-in-rails-7
author: Dwight Watson
date: 2022-04-04
tags: ["rails", "activestorage"]
---

Rails 7 introduced a new feature to pre-define your ActiveStorage variants to allow re-use throughout your app. Unfortunately one of the top blog posts on Google doesn't show how to use it correctly - demonstrating the original proposed syntax instead of the one that shipped.

Simply speaking, you can pop a block after the ActiveStorage attachment and then create named variants to use where required.

```rb
class User < ApplicationRecord
  has_one_attached :avatar do |attachable|
    attachable.variant :thumbnail, resize: "100x100"
  end
```

Then you can provide the named symbol when referencing the attachment.

```rb
image_tag user.avatar.variant(:thumbnail)
```
